"use strict";(globalThis.webpackChunkpro_8=globalThis.webpackChunkpro_8||[]).push([[64524],{9075(e,a,s){s.r(a),s.d(a,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>n,toc:()=>i});const n=JSON.parse('{"id":"devs/devops/Manuales-adicionales/Doker/Restauracion-MySQL","title":"Manual de Restauraci\xf3n Mysql","description":"Pasos para restaurar los datos del contenedor mysql en caso de problemas con Docker.","source":"@site/docs/devs/devops/Manuales-adicionales/Doker/3-Restauracion-MySQL.md","sourceDirName":"devs/devops/Manuales-adicionales/Doker","slug":"/devs/devops/Manuales-adicionales/Doker/Restauracion-MySQL","permalink":"/devs/devops/Manuales-adicionales/Doker/Restauracion-MySQL","draft":false,"unlisted":false,"editUrl":"https://github.com/zjceo/pro8/tree/main/docs/devs/devops/Manuales-adicionales/Doker/3-Restauracion-MySQL.md","tags":[],"version":"current","lastUpdatedBy":"zjceo","lastUpdatedAt":1766108651000,"sidebarPosition":3,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Gu\xeda para generar backup","permalink":"/devs/devops/Manuales-adicionales/Doker/Generar-backup"},"next":{"title":"Servidores","permalink":"/servidores"}}');var r=s(74848),o=s(28453);const l={},c="Manual de Restauraci\xf3n Mysql",d={},i=[{value:"Pasos para restaurar los datos del contenedor mysql en caso de problemas con Docker.",id:"pasos-para-restaurar-los-datos-del-contenedor-mysql-en-caso-de-problemas-con-docker",level:3},{value:"Aviso:",id:"aviso",level:3}];function t(e){const a={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"manual-de-restauraci\xf3n-mysql",children:"Manual de Restauraci\xf3n Mysql"})}),"\n",(0,r.jsx)(a.h3,{id:"pasos-para-restaurar-los-datos-del-contenedor-mysql-en-caso-de-problemas-con-docker",children:"Pasos para restaurar los datos del contenedor mysql en caso de problemas con Docker."}),"\n",(0,r.jsx)(a.p,{children:"Condiciones para restablecer de manera correcta la base de datos:"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsx)(a.li,{children:"poseer conexi\xf3n SSH"}),"\n",(0,r.jsx)(a.li,{children:"poseer espacio en disco (de no poseer lo mejor ser\xe1 crear una copia y leerlo desde otro servidor/instancia)"}),"\n",(0,r.jsx)(a.li,{children:"poseer acceso superusuario \u201csudo su\u201d"}),"\n"]}),"\n",(0,r.jsx)(a.h3,{id:"aviso",children:"Aviso:"}),"\n",(0,r.jsx)(a.p,{children:"\u2022 Con los siguientes pasos se eliminar\xe1n las im\xe1genes, contenedores, vol\xfamenes y dem\xe1s creados en docker\r\n\u2022 De manera previa se recomienda resguardar toda la informaci\xf3n contenida en storage dentro del proyecto"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsx)(a.li,{children:"Acceder mediante SSH y conectarse como super usuario"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"        sudo su\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"2",children:["\n",(0,r.jsx)(a.li,{children:"Ubicar la carpeta y nombre de mysql/mariadb dentro de /var/lib/docker/volumes/"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"        cd /var/lib/docker/volumes\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"        ls\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"3",children:["\n",(0,r.jsx)(a.li,{children:"copiar la carpeta de mysql/mariadb del sistema"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"cp -r nombre_mariadb1 /home/\n"})}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.strong,{children:"Sintaxis:"})}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"a. [comando]"}),"\r\n",(0,r.jsx)(a.strong,{children:"b. [recursivo]"}),"\r\n",(0,r.jsx)(a.strong,{children:"c. [nombre de carpeta]"}),"\r\n",(0,r.jsx)(a.strong,{children:"d. [ruta donde copiar\xe1]"})]}),"\n",(0,r.jsxs)(a.ol,{start:"4",children:["\n",(0,r.jsx)(a.li,{children:"Eliminar todo lo relacionado con docker, este proceso puede tardar un poco"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker system prune -a --volumes\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"5",children:["\n",(0,r.jsx)(a.li,{children:"al finalizar el proceso ubicarse en la ruta del proyecto, por ejemplo"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"cd /home/facturadorpro\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"6",children:["\n",(0,r.jsx)(a.li,{children:"iniciar el proyecto nuevamente con docker"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"7",children:["\n",(0,r.jsx)(a.li,{children:"con esto se crear\xe1n de nuevo los contenedores y dem\xe1s, as\xed que deber\xe1 reemplazar una vez finalizado la nueva carpeta mysql por la que se respaldo anteriormente, antes podr\xeda crear un backup en caso de tener problemas posteriores."}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"cd /var/liv/docker/volumes/\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"mv nombre_mariadb1 nombre_mariadb1_bk\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"8",children:["\n",(0,r.jsx)(a.li,{children:"mueva la carpeta respaldada a la ubicaci\xf3n actual"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"mv /home/nombre_mariadb1 /var/lib/docker/volumes/\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"9",children:["\n",(0,r.jsx)(a.li,{children:"nuevamente ub\xedquese en la carpeta del proyecto, detenga los servicios e inicie de nuevo para que la carpeta reemplazada sea reconocida."}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose down\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"10",children:["\n",(0,r.jsx)(a.li,{children:"actualice el navegador eliminando la cach\xe9 y ya podr\xe1 utilizar el sistema con la base de datos que pose\xeda"}),"\n"]})]})}function p(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},28453(e,a,s){s.d(a,{R:()=>l,x:()=>c});var n=s(96540);const r={},o=n.createContext(r);function l(e){const a=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function c(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(o.Provider,{value:a},e.children)}}}]);