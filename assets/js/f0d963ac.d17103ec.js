"use strict";(globalThis.webpackChunkpro_8=globalThis.webpackChunkpro_8||[]).push([[46121],{24378(e,a,n){n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"devs/devops/Manuales-adicionales/No-clasificados/Validar-Documento","title":"Validador de Documentos","description":"Se realiza una consulta de estado de los comprobantes registrados en el facturador con Sunat, de esta forma validar el estado del comprobante en la entidad. Aplica a Facturas, Boletas y Notas.","source":"@site/docs/devs/devops/Manuales-adicionales/No-clasificados/3-Validar-Documento.md","sourceDirName":"devs/devops/Manuales-adicionales/No-clasificados","slug":"/devs/devops/Manuales-adicionales/No-clasificados/Validar-Documento","permalink":"/devs/devops/Manuales-adicionales/No-clasificados/Validar-Documento","draft":false,"unlisted":false,"editUrl":"https://github.com/zjceo/pro8/tree/main/docs/devs/devops/Manuales-adicionales/No-clasificados/3-Validar-Documento.md","tags":[],"version":"current","lastUpdatedBy":"zjceo","lastUpdatedAt":1766108651000,"sidebarPosition":3,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Crear repositorio independiente - Espejo (Mirror)","permalink":"/devs/devops/Manuales-adicionales/No-clasificados/Crear-repositorio-independiente"},"next":{"title":"C\xf3mo realizar el cambio de estados de comprobantes desde la base de datos","permalink":"/devs/devops/ingreso-a-la-db"}}');var o=n(74848),r=n(28453);const d={},i="Validador de Documentos",c={},l=[{value:"Instalaci\xf3n de Tesseract OCR",id:"instalaci\xf3n-de-tesseract-ocr",level:2},{value:"En Linux",id:"en-linux",level:3},{value:"En Windows",id:"en-windows",level:3},{value:"Validar Documentos",id:"validar-documentos",level:2},{value:"Comando",id:"comando",level:3},{value:"Interfaz del Facturador",id:"interfaz-del-facturador",level:3}];function t(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.header,{children:(0,o.jsx)(a.h1,{id:"validador-de-documentos",children:"Validador de Documentos"})}),"\n",(0,o.jsx)(a.p,{children:"Se realiza una consulta de estado de los comprobantes registrados en el facturador con Sunat, de esta forma validar el estado del comprobante en la entidad. Aplica a Facturas, Boletas y Notas."}),"\n",(0,o.jsx)(a.h2,{id:"instalaci\xf3n-de-tesseract-ocr",children:"Instalaci\xf3n de Tesseract OCR"}),"\n",(0,o.jsx)(a.h3,{id:"en-linux",children:"En Linux"}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Conectarse al servidor v\xeda SSH, puede usar la gu\xeda."}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsxs)(a.p,{children:["Ejecutar ",(0,o.jsx)(a.code,{children:"docker ps"})," y verificar que est\xe9n al menos las siguientes l\xedneas que equivalen a los contenedores de cada servicio iniciado por Docker."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-plaintext",children:'CONTAINER ID        IMAGE                      COMMAND                     CREATED             STATUS              PORTS                                      NAMES\r\n92f43f53f8e4        stenfrank/php:1.0          "php-fpm7.2"                18 hours ago        Up 18 hours         9000/tcp                                   multifacturalo_fpm2_1\r\n914a35c72512        redis:alpine               "docker-entrypoint.s\u2026"      18 hours ago        Up 18 hours         0.0.0.0:6381->6379/tcp                     multifacturalo_redis2_1\r\nde282cbbbc15        mariadb                    "docker-entrypoint.s\u2026"      18 hours ago        Up 18 hours         0.0.0.0:3307->3306/tcp                     multifacturalo_mariadb2_1\r\neb049c8dba9c        stenfrank/nginx:1.0        "nginx"                     18 hours ago        Up 18 hours         80/tcp                                     multifacturalo_nginx2_1\n'})}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsxs)(a.p,{children:["En la lista deber\xe1 fijarse en los ",(0,o.jsx)(a.code,{children:"NAMES"})," que contengan ",(0,o.jsx)(a.code,{children:"fpm"}),"."]}),"\n",(0,o.jsxs)(a.p,{children:[(0,o.jsx)(a.code,{children:"multifacturalo_fpm2_1"})," equivale al nombre del proyecto donde una vez accedido se encontrar\xe1 justo en la ruta donde se ha alojado el repositorio y podr\xe1 ejecutar comandos ",(0,o.jsx)(a.code,{children:"artisan"}),", ",(0,o.jsx)(a.code,{children:"git"})," o ",(0,o.jsx)(a.code,{children:"composer"}),". Este nombre puede variar un poco, puede llamarse ",(0,o.jsx)(a.code,{children:"multifacturalonew_fpm1_1"}),", ",(0,o.jsx)(a.code,{children:"facturadorpro3_fpm1_1"}),", etc."]}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Una vez ubicado el contenedor a acceder, ejecute el siguiente comando:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"docker exec -ti multifacturalo_fpm1_1 /bin/bash\n"})}),"\n",(0,o.jsx)(a.p,{children:"De esta manera se conectar\xe1 al contenedor, observar\xe1 un cambio en el inicio de la terminal."}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsxs)(a.p,{children:["Si ha accedido a ",(0,o.jsx)(a.code,{children:"fpm"})," entonces se debe encontrar en la ruta ",(0,o.jsx)(a.code,{children:"/var/www/html/"})," donde podr\xe1 ejecutar comandos."]}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsxs)(a.p,{children:["Ejecute los siguientes comandos para instalar las bibliotecas necesarias para ",(0,o.jsx)(a.code,{children:"tesseract-ocr"}),":"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"apt-get update\r\napt install libtesseract-dev libleptonica-dev liblept5\n"})}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsxs)(a.p,{children:["Instale ",(0,o.jsx)(a.code,{children:"tesseract"}),":"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"apt install tesseract-ocr -y\n"})}),"\n",(0,o.jsx)(a.p,{children:"Si toda la instalaci\xf3n fue satisfactoria, contin\xfae al siguiente punto."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.h3,{id:"en-windows",children:"En Windows"}),"\n",(0,o.jsx)(a.p,{children:"Para la instalaci\xf3n en Windows, siga las instrucciones en el siguiente enlace:"}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.a,{href:"https://github.com/UB-Mannheim/tesseract/wiki",children:"Instalaci\xf3n de Tesseract en Windows"})}),"\n",(0,o.jsxs)(a.p,{children:["En caso de no instalar en disco C, cambiar en la l\xednea 158 la ruta en el archivo ",(0,o.jsx)(a.code,{children:"app/CoreFacturalo/Services/Extras/ValidateCpe2.php"}),"."]}),"\n",(0,o.jsx)(a.h2,{id:"validar-documentos",children:"Validar Documentos"}),"\n",(0,o.jsx)(a.p,{children:"Estos comandos deben ejecutarse dentro del contenedor PHP. Puede usar los puntos anteriores para acceder si es que se encuentra fuera del contenedor mencionado."}),"\n",(0,o.jsx)(a.h3,{id:"comando",children:"Comando"}),"\n",(0,o.jsxs)(a.p,{children:["Este comando recibe 2 par\xe1metros opcionales, el establecimiento y estado del documento ",(0,o.jsx)(a.code,{children:"establishment_id"})," y ",(0,o.jsx)(a.code,{children:"state_type_id"}),"."]}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Sin par\xe1metros:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"php artisan tenancy:run validate:documents\n"})}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Con par\xe1metros:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"php artisan tenancy:run validate:documents --argument=establishment_id=1 --argument=state_type_id=05\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Al ejecutar el comando, visualizar\xe1 el estado de los documentos en Sunat."}),"\n",(0,o.jsx)(a.h3,{id:"interfaz-del-facturador",children:"Interfaz del Facturador"}),"\n",(0,o.jsx)(a.p,{children:"Tambi\xe9n puede usar la interfaz del facturador."})]})}function u(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},28453(e,a,n){n.d(a,{R:()=>d,x:()=>i});var s=n(96540);const o={},r=s.createContext(o);function d(e){const a=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(r.Provider,{value:a},e.children)}}}]);